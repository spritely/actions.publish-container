name: Basic Publish Container Test
description: Basic test for the publish-container action

runs:
  using: composite
  steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up test environment
      shell: bash
      run: |
        echo "Setting up basic test environment"
        echo "Test version: 1.0.0" >> $GITHUB_ENV

    - name: Create test Dockerfile
      shell: bash
      run: |
        cat > ${{ github.workspace }}/tests/basic-test/Dockerfile << 'EOF'
        FROM alpine:latest
        RUN echo "This is a test container" > /test.txt
        CMD ["cat", "/test.txt"]
        EOF

    - name: Run publish-container action
      uses: ./
      with:
        registryHost: localhost:5000
        registryUsername: testuser
        registryPassword: testpassword
        imageNames: localhost:5000/test-image
        version: 1.0.0

    - name: Verify results
      shell: bash
      run: |
        echo "Verifying basic test results"
        # Here we would add verification logic
        # For now, just report success
        echo "Basic test passed!"
